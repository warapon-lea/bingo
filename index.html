<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road Trip 2025</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б -->
    <div id="welcome" class="container">
        <div class="header">
            <h1>ЁЯЪЧ Road Trip Games</h1>
            <p class="subtitle">р╣Ар╕Бр╕бр╕лр╕▓р╕Вр╕нр╕Зр╕кр╕╕р╕Фр╕бр╕▒р╕Щр╕кр╣Мр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Чр╕▓р╕З!</p>
        </div>
        
        <div class="welcome-menu">
            <button class="menu-btn create" onclick="showCreateTeam()">
                <div class="btn-icon">ЁЯОо</div>
                <div class="btn-title">р╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╕бр╣Гр╕лр╕бр╣И</div>
                <div class="btn-desc">р╕кр╕│р╕лр╕гр╕▒р╕Ър╕лр╕▒р╕зр╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╕б/р╕Др╕Щр╕Вр╕▒р╕Ър╕гр╕Ц</div>
            </button>
            
            <button class="menu-btn join" onclick="showJoinTeam()">
                <div class="btn-icon">ЁЯСе</div>
                <div class="btn-title">р╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕бр╕Чр╕╡р╕б</div>
                <div class="btn-desc">р╣Гр╕кр╣Ир╕гр╕лр╕▒р╕кр╕Чр╕╡р╕бр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ъ</div>
            </button>
            
            <button class="menu-btn admin" onclick="showAdmin()">
                <div class="btn-icon">ЁЯСС</div>
                <div class="btn-title">Admin Panel</div>
                <div class="btn-desc">р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕гр╕░р╕Ър╕Ър╣Бр╕ер╕░р╕ар╕▓р╕гр╕Бр╕┤р╕И</div>
            </button>
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓р╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╕б -->
    <div id="createTeam" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="backToWelcome()">тЖР р╕Бр╕ер╕▒р╕Ъ</button>
            <h2>ЁЯОо р╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╕бр╣Гр╕лр╕бр╣И</h2>
        </div>
        
        <div class="form-container">
            <div class="form-group">
                <label>р╕Кр╕╖р╣Ир╕нр╕Чр╕╡р╕б</label>
                <input type="text" id="teamNameInput" placeholder="р╣Ар╕Кр╣Ир╕Щ р╕гр╕Ц 1 - р╕Чр╕╡р╕бр╕кр╕▓р╕вр╕Яр╣Йр╕▓" maxlength="30">
            </div>
            
            <div class="form-group">
                <label>р╕Кр╕╖р╣Ир╕нр╕лр╕▒р╕зр╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╕б (р╕Др╕╕р╕У)</label>
                <input type="text" id="leaderNameInput" placeholder="р╣Гр╕кр╣Ир╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Др╕╕р╕У" maxlength="20">
            </div>
            
            <button class="submit-btn" onclick="createTeam()">тЬи р╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╕б</button>
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓р╣Бр╕кр╕Фр╕Зр╕гр╕лр╕▒р╕кр╕Чр╕╡р╕б -->
    <div id="teamCodeDisplay" class="container" style="display: none;">
        <div class="header">
            <h2>ЁЯОЙ р╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╕бр╕кр╕│р╣Ар╕гр╣Зр╕И!</h2>
        </div>
        
        <div class="code-container">
            <p class="code-label">р╕гр╕лр╕▒р╕кр╕Чр╕╡р╕бр╕Вр╕нр╕Зр╕Др╕╕р╕У</p>
            <div class="team-code" id="displayTeamCode">ABC123</div>
            <p class="code-hint">ЁЯУ▒ р╣Бр╕Кр╕гр╣Мр╕гр╕лр╕▒р╕кр╕Щр╕╡р╣Йр╣Гр╕лр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕Щр╣Гр╕Щр╕гр╕Ц</p>
            <button class="copy-btn" onclick="copyTeamCode()">ЁЯУЛ р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕гр╕лр╕▒р╕к</button>
        </div>
        
        <button class="submit-btn" onclick="startGame()">ЁЯЪА р╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕Бр╕б</button>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓р╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕бр╕Чр╕╡р╕б -->
    <div id="joinTeam" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="backToWelcome()">тЖР р╕Бр╕ер╕▒р╕Ъ</button>
            <h2>ЁЯСе р╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕бр╕Чр╕╡р╕б</h2>
        </div>
        
        <div class="form-container">
            <div class="form-group">
                <label>р╕гр╕лр╕▒р╕кр╕Чр╕╡р╕б (6 р╕лр╕ер╕▒р╕Б)</label>
                <input type="text" id="teamCodeInput" placeholder="ABC123" maxlength="6" style="text-transform: uppercase;">
            </div>
            
            <div class="form-group">
                <label>р╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Др╕╕р╕У</label>
                <input type="text" id="memberNameInput" placeholder="р╣Гр╕кр╣Ир╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Др╕╕р╕У" maxlength="20">
            </div>
            
            <button class="submit-btn" onclick="joinTeamWithCode()">тЬУ р╣Ар╕Вр╣Йр╕▓р╕гр╣Ир╕зр╕б</button>
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓р╣Ар╕Бр╕б -->
    <div id="gameBoard" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="confirmLeaveTeam()">тЖР р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕Чр╕╡р╕б</button>
            <h2 id="teamName">р╕Чр╕╡р╕б</h2>
            <div class="team-info-box">
                <div class="score-display">
                    <span id="teamScore">0</span> р╕Др╕░р╣Бр╕Щр╕Щ
                </div>
                <div class="members-display">
                    <span class="members-icon">ЁЯСе</span>
                    <span id="memberCount">0</span> р╕Др╕Щ
                </div>
            </div>
        </div>

        <!-- р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕кр╕бр╕▓р╕Кр╕┤р╕Б -->
        <div class="members-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3 style="margin: 0;">ЁЯСе р╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕Щр╕Чр╕╡р╕б</h3>
                <button class="copy-code-btn" onclick="copyCurrentTeamCode()">ЁЯУЛ р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕гр╕лр╕▒р╕к</button>
            </div>
            <div id="membersList" class="members-list">
                <!-- р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И -->
            </div>
        </div>

        <!-- р╕ар╕▓р╕гр╕Бр╕┤р╕И -->
        <div class="missions-section">
            <h3>ЁЯОп р╕ар╕▓р╕гр╕Бр╕┤р╕Ир╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</h3>
            <div class="missions-container">
                <!-- р╕ар╕▓р╕гр╕Бр╕┤р╕Ир╕Ир╕░р╕Цр╕╣р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣Ир╕Ьр╣Ир╕▓р╕Щ JavaScript -->
            </div>
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓ Public Scoreboard -->
    <div id="publicScoreboard" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="backToWelcome()">тЖР р╕Бр╕ер╕▒р╕Ъ</button>
            <h2>ЁЯПЖ Scoreboard Live</h2>
            <p class="subtitle">р╕нр╕▒р╕Юр╣Ар╕Фр╕Чр╕Чр╕╕р╕Б 2 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡</p>
        </div>

        <div class="scores-container" id="publicScoresContainer">
            <!-- р╕Др╕░р╣Бр╕Щр╕Щр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И -->
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓ Admin -->
    <div id="adminPanel" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="backToWelcome()">тЖР р╕Бр╕ер╕▒р╕Ъ</button>
            <h2>ЁЯСС Admin Panel</h2>
            <p class="subtitle">р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕гр╕░р╕Ър╕Ъ</p>
        </div>

        <!-- р╣Бр╕Чр╣Зр╕Ър╣Ар╕бр╕Щр╕╣ -->
        <div class="admin-tabs">
            <button class="tab-btn active" onclick="showAdminTab('scoreboard')">ЁЯПЖ р╕Др╕░р╣Бр╕Щр╕Щр╕Чр╕╡р╕б</button>
            <button class="tab-btn" onclick="showAdminTab('missions')">ЁЯОп р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕ар╕▓р╕гр╕Бр╕┤р╕И</button>
        </div>

        <!-- р╣Бр╕Чр╣Зр╕Ър╕Др╕░р╣Бр╕Щр╕Щр╕Чр╕╡р╕б -->
        <div id="adminScoreboardTab" class="admin-tab-content">
            <div class="scores-container" id="adminScoresContainer">
                <!-- р╕Др╕░р╣Бр╕Щр╕Щр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И -->
            </div>

            <div class="admin-controls">
                <h3>ЁЯФз р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Чр╕╡р╕б</h3>
                <button class="reset-btn" onclick="resetAllScores()">ЁЯФД р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Др╕░р╣Бр╕Щр╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
                <button class="delete-btn" onclick="deleteAllTeams()">ЁЯЧСя╕П р╕ер╕Ър╕Чр╕╡р╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
            </div>
        </div>

        <!-- р╣Бр╕Чр╣Зр╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕ар╕▓р╕гр╕Бр╕┤р╕И -->
        <div id="adminMissionsTab" class="admin-tab-content" style="display: none;">
            <div class="missions-admin-header">
                <button class="add-mission-btn" onclick="showAddMissionForm()">тЮХ р╣Ар╕Юр╕┤р╣Ир╕бр╕ар╕▓р╕гр╕Бр╕┤р╕Ир╣Гр╕лр╕бр╣И</button>
            </div>
            
            <div id="missionsAdminContainer" class="missions-admin-list">
                <!-- р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕ар╕▓р╕гр╕Бр╕┤р╕Ир╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И -->
            </div>
        </div>
    </div>

    <!-- р╕лр╕Щр╣Йр╕▓р╕Фр╕╣р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕╡р╕б -->
    <div id="teamPhotosPanel" class="container" style="display: none;">
        <div class="header">
            <button class="back-btn" onclick="backToAdminPanel()">тЖР р╕Бр╕ер╕▒р╕Ъ</button>
            <h2 id="photoPanelTeamName">ЁЯУ╕ р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕╡р╕б</h2>
        </div>

        <div id="photoMissionsContainer" class="photos-container">
            <!-- р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╕Чр╕╡р╣Ир╕Щр╕╡р╣И -->
        </div>
    </div>

    <!-- Modal р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Цр╣Ир╕▓р╕вр╕гр╕╣р╕Ы -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">р╕Цр╣Ир╕▓р╕вр╕гр╕╣р╕Ы</h3>
            <p id="modalDescription"></p>
            
            <input type="file" id="photoInput" accept="image/*" capture="environment">
            <div id="photoPreview"></div>
            
            <button class="submit-btn" onclick="submitMission()">тЬУ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕ар╕▓р╕гр╕Бр╕┤р╕И</button>
        </div>
    </div>

    <!-- Modal р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Юр╕┤р╣Ир╕б/р╣Бр╕Бр╣Йр╣Др╕Вр╕ар╕▓р╕гр╕Бр╕┤р╕И -->
    <div id="missionFormModal" class="modal">
        <div class="modal-content mission-form-modal">
            <span class="close" onclick="closeMissionForm()">&times;</span>
            <h3 id="missionFormTitle">тЮХ р╣Ар╕Юр╕┤р╣Ир╕бр╕ар╕▓р╕гр╕Бр╕┤р╕Ир╣Гр╕лр╕бр╣И</h3>
            
            <div class="form-group">
                <label>Emoji:</label>
                <input type="text" id="missionEmoji" placeholder="ЁЯОп" maxlength="2">
            </div>

            <div class="form-group">
                <label>р╕Кр╕╖р╣Ир╕нр╕ар╕▓р╕гр╕Бр╕┤р╕И:</label>
                <input type="text" id="missionTitle" placeholder="р╣Ар╕Кр╣Ир╕Щ р╕Цр╣Ир╕▓р╕вр╕гр╕╣р╕Ыр╕Бр╕▒р╕Ър╕лр╕бр╕▓">
            </div>

            <div class="form-group">
                <label>р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф:</label>
                <textarea id="missionDescription" placeholder="р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕ар╕▓р╕гр╕Бр╕┤р╕И" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label>р╕Др╕░р╣Бр╕Щр╕Щ:</label>
                <input type="number" id="missionPoints" min="5" max="100" value="10">
            </div>

            <input type="hidden" id="editMissionId">

            <div class="form-actions">
                <button class="cancel-btn" onclick="closeMissionForm()">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</button>
                <button class="submit-btn" onclick="saveMission()">тЬУ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK (р╣Гр╕Кр╣Йр╣Бр╕Др╣И 2 р╕Хр╕▒р╕з - р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й Storage!) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Main App -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
